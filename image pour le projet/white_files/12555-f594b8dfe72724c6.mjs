(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[12555],{782677:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function a(e){return!(!e||"function"!=typeof e.hasOwnProperty||!(e.hasOwnProperty("__ownerID")||e._map&&e._map.hasOwnProperty("__ownerID")))}function c(e,t,n){return Object.keys(e).reduce((function(t,i){var r=""+i;return t.has(r)?t.set(r,n(t.get(r),e[r])):t}),t)}n.d(t,{Fv:()=>x,cY:()=>j,fK:()=>_});var d=function(){function e(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),!e||"string"!=typeof e)throw new Error("Expected a string key for Entity, but found "+e+".");var i=n,r=i.idAttribute,s=void 0===r?"id":r,c=i.mergeStrategy,d=void 0===c?function(e,t){return o({},e,t)}:c,l=i.processStrategy,u=void 0===l?function(e){return o({},e)}:l,h=i.fallbackStrategy,p=void 0===h?function(e,t){}:h;this._key=e,this._getId="function"==typeof s?s:function(e){return function(t){return a(t)?t.get(e):t[e]}}(s),this._idAttribute=s,this._mergeStrategy=d,this._processStrategy=u,this._fallbackStrategy=p,this.define(t)}var t=e.prototype;return t.define=function(e){this.schema=Object.keys(e).reduce((function(t,n){var i,r=e[n];return o({},t,((i={})[n]=r,i))}),this.schema||{})},t.getId=function(e,t,n){return this._getId(e,t,n)},t.merge=function(e,t){return this._mergeStrategy(e,t)},t.fallback=function(e,t){return this._fallbackStrategy(e,t)},t.normalize=function(e,t,n,i,r,o){var s=this,a=this.getId(e,t,n),c=this.key;if(c in o||(o[c]={}),a in o[c]||(o[c][a]=[]),o[c][a].some((function(t){return t===e})))return a;o[c][a].push(e);var d=this._processStrategy(e,t,n);return Object.keys(this.schema).forEach((function(t){if(d.hasOwnProperty(t)&&"object"==typeof d[t]){var n=s.schema[t],a="function"==typeof n?n(e):n;d[t]=i(d[t],d,t,a,r,o)}})),r(this,d,e,t,n),a},t.denormalize=function(e,t){var n=this;return a(e)?c(this.schema,e,t):(Object.keys(this.schema).forEach((function(i){if(e.hasOwnProperty(i)){var r=n.schema[i];e[i]=t(e[i],r)}})),e)},r(e,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),e}(),l=function(){function e(e,t){t&&(this._schemaAttribute="string"==typeof t?function(e){return e[t]}:t),this.define(e)}var t=e.prototype;return t.define=function(e){this.schema=e},t.getSchemaAttribute=function(e,t,n){return!this.isSingleSchema&&this._schemaAttribute(e,t,n)},t.inferSchema=function(e,t,n){if(this.isSingleSchema)return this.schema;var i=this.getSchemaAttribute(e,t,n);return this.schema[i]},t.normalizeValue=function(e,t,n,i,r,o){var s=this.inferSchema(e,t,n);if(!s)return e;var a=i(e,t,n,s,r,o);return this.isSingleSchema||null==a?a:{id:a,schema:this.getSchemaAttribute(e,t,n)}},t.denormalizeValue=function(e,t){var n=a(e)?e.get("schema"):e.schema;return this.isSingleSchema||n?t((this.isSingleSchema?void 0:a(e)?e.get("id"):e.id)||e,this.isSingleSchema?this.schema:this.schema[n]):e},r(e,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),e}(),u=function(e){function t(t,n){if(!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return e.call(this,t,n)||this}s(t,e);var n=t.prototype;return n.normalize=function(e,t,n,i,r,o){return this.normalizeValue(e,t,n,i,r,o)},n.denormalize=function(e,t){return this.denormalizeValue(e,t)},t}(l),h=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var n=t.prototype;return n.normalize=function(e,t,n,i,r,s){var a=this;return Object.keys(e).reduce((function(t,n,c){var d,l=e[n];return null!=l?o({},t,((d={})[n]=a.normalizeValue(l,e,n,i,r,s),d)):t}),{})},n.denormalize=function(e,t){var n=this;return Object.keys(e).reduce((function(i,r){var s,a=e[r];return o({},i,((s={})[r]=n.denormalizeValue(a,t),s))}),{})},t}(l),p=function(e){if(Array.isArray(e)&&e.length>1)throw new Error("Expected schema definition to be a single schema, but found "+e.length+".");return e[0]},f=function(e){return Array.isArray(e)?e:Object.keys(e).map((function(t){return e[t]}))},b=function(e,t,n,i,r,o,s){return e=p(e),f(t).map((function(t,a){return r(t,n,i,e,o,s)}))},m=function(e,t,n){return e=p(e),t&&t.map?t.map((function(t){return n(t,e)})):t},y=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var n=t.prototype;return n.normalize=function(e,t,n,i,r,o){var s=this;return f(e).map((function(e,a){return s.normalizeValue(e,t,n,i,r,o)})).filter((function(e){return null!=e}))},n.denormalize=function(e,t){var n=this;return e&&e.map?e.map((function(e){return n.denormalizeValue(e,t)})):e},t}(l),g=function(e,t,n,i,r,s,a){var c=o({},t);return Object.keys(e).forEach((function(n){var i=e[n],o="function"==typeof i?i(t):i,d=r(t[n],t,n,o,s,a);null==d?delete c[n]:c[n]=d})),c},v=function(e,t,n){if(a(t))return c(e,t,n);var i=o({},t);return Object.keys(e).forEach((function(t){null!=i[t]&&(i[t]=n(i[t],e[t]))})),i},I=function e(t,n,i,r,o,s){return"object"==typeof t&&t?"object"!=typeof r||r.normalize&&"function"==typeof r.normalize?r.normalize(t,n,i,e,o,s):(Array.isArray(r)?b:g)(r,t,n,i,e,o,s):t},_={Array:y,Entity:d,Object:function(){function e(e){this.define(e)}var t=e.prototype;return t.define=function(e){this.schema=Object.keys(e).reduce((function(t,n){var i,r=e[n];return o({},t,((i={})[n]=r,i))}),this.schema||{})},t.normalize=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.apply(void 0,[this.schema].concat(t))},t.denormalize=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,[this.schema].concat(t))},e}(),Union:u,Values:h},x=function(e,t){if(!e||"object"!=typeof e)throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(null===e?"null":typeof e)+'".');var n={},i=function(e){return function(t,n,i,r,o){var s=t.key,a=t.getId(i,r,o);s in e||(e[s]={});var c=e[s][a];e[s][a]=c?t.merge(c,n):n}}(n);return{entities:n,result:I(e,e,null,t,i,{})}},w=function(e){var t={},n=S(e);return function e(i,r){return"object"!=typeof r||r.denormalize&&"function"==typeof r.denormalize?null==i?i:r instanceof d?function(e,t,n,i,r){var s=i(e,t);if(void 0===s&&t instanceof d&&(s=t.fallback(e,t)),"object"!=typeof s||null===s)return s;if(r[t.key]||(r[t.key]={}),!r[t.key][e]){var c=a(s)?s:o({},s);r[t.key][e]=c,r[t.key][e]=t.denormalize(c,n)}return r[t.key][e]}(i,r,e,n,t):r.denormalize(i,e):(Array.isArray(r)?m:v)(r,i,e)}},S=function(e){var t=a(e);return function(n,i){var r=i.key;return"object"==typeof n?n:t?e.getIn([r,n.toString()]):e[r]&&e[r][n]}},j=function(e,t,n){if(void 0!==e)return w(n)(e,t)}},511931:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),r=(n(69895),n(76814)),o=n(883119),s=n(710159),a=n(785893);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.Component{constructor(...e){super(...e),c(this,"setInputRef",(e=>{e&&(this._input=e)})),c(this,"handleKeyDown",(e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case r.Z.ENTER:case r.Z.NUMPAD_ENTER:e.preventDefault(),n.select();break;case r.Z.UP:e.preventDefault(),n.prev();break;case r.Z.DOWN:e.preventDefault(),n.next()}}))}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return(0,a.jsx)("div",{onKeyDown:this.handleKeyDown,role:"presentation",style:{width:"100%"},children:(0,a.jsx)(o.Um,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:this.props.i18n._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t})})}}const l=function(e){const t=(0,s.ZP)();return(0,a.jsx)(d,{...e,i18n:t})}},647637:(e,t,n)=>{n.d(t,{j:()=>o});const i={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},r=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=i[e.charAt(n)]||e.charAt(n);return t},o=(e,t,n="name")=>{const i=t.toLowerCase();return e.filter((e=>((e,t)=>{const n=t.split(" "),i=e.split(" ");let o=0;for(let s=0;s<i.length;s+=1)(r(i[s]).includes(n[o])||i[s].includes(n[o]))&&(o+=1);return o===n.length})(e[n].toLowerCase(),i)))}},641316:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(698991),r=n(411866),o=n(883119),s=n(785893);const a=({collaborator_count:e,useLegoLayout:t,type:n})=>t?(0,s.jsx)(o.xu,{marginEnd:e?2:0,children:(0,s.jsx)(i.Z,{type:n})}):(0,s.jsx)(i.Z,{type:n}),c=({board:e,showCollaborativeIcon:t,showPrivateIcon:n,showProtectedIcon:c,showSectionsIcon:d,useLegoLayout:l})=>{var u;const h=(null==e||null===(u=e.collaborating_users)||void 0===u?void 0:u.length)||0;return t||n||c||d?(0,s.jsxs)(o.xu,{display:"flex",direction:"row",marginEnd:l?0:5,dangerouslySetInlineStyle:{__style:{paddingLeft:8}},alignItems:"center",children:[n&&(0,s.jsx)(a,{collaborator_count:h,useLegoLayout:l,type:"secret"}),c&&(0,s.jsx)(a,{collaborator_count:h,useLegoLayout:l,type:"protected"}),t&&(l?(0,s.jsx)(r.Z,{board:e,isCompact:!0,ownerOnly:!1}):(0,s.jsx)(i.Z,{type:"group"})),d&&(0,s.jsx)(i.Z,{type:"sections"})]}):null}},59960:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(883119),r=n(785893);const o=({image_url:e,naturalHeight:t,naturalWidth:n})=>(0,r.jsx)(i.xu,{"aria-hidden":"true",marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,height:48,children:(0,r.jsx)(i.zd,{wash:!0,width:48,height:48,rounding:2,children:(0,r.jsx)(i.Ee,{src:e,alt:"",naturalHeight:t,naturalWidth:n})})})},69895:(e,t,n)=>{n.d(t,{Z:()=>s});const i={row:0,section:0},r={row:-1,section:-1},o=()=>{};class s{constructor(e){this.index=Object.assign({},i),this.sections=e,this.updateCallback=o,this.selectItem=o}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===r.row&&t===r.section?this.index=Object.assign({},i):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===r.row&&t===r.section)this.index=Object.assign({},i);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},r),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},885054:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),r=n(717138),o=(n(69895),n(883119)),s=n(785893);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.Component{constructor(e){super(e),a(this,"setSelectedItemRef",(e=>{this.selectedItemRef=e})),a(this,"handleIndexUpdate",(e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})})),a(this,"handleSelectItem",(e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)})),a(this,"handleMouseEnter",(e=>()=>{const{disabled:t,indexManager:n}=this.props;t||n.updateIndex(e)})),a(this,"handleMouseLeave",(()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()})),a(this,"renderItems",((e,t)=>{const{renderItem:n}=this.props,{selectedIndex:i}=this.state,{row:r,section:a}=i||{},{customProps:c={},items:d,renderItem:l}=e,{isDisabled:u=(e=>!1)}=c,h=t===a,p=l||n;return p&&d.map(((e,n)=>{const i=u(e),a={section:t,row:n},d=h&&n===r;return(0,s.jsx)(o.xu,{"data-test-id":"board-selection",ref:!i&&d?this.setSelectedItemRef:null,children:i?p({item:e,hovered:d,sectionProps:c}):(0,s.jsx)(o.iP,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(a),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:p({item:e,hovered:d,sectionProps:c})})},n)}))})),a(this,"renderSections",(()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map(((t,n)=>(0,s.jsxs)(o.xu,{children:[e&&e(t,n),this.renderItems(t,n)]},n)))}));const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),i=n.top,r=n.bottom,o=t.getBoundingClientRect(),s=o.top;r>=o.bottom?e.scrollIntoView(!1):i<=s&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return(0,s.jsx)(r.Z,{fetchMore:n,children:({setRef:n,onScroll:i})=>(0,s.jsx)(o.xu,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:i,overflow:"auto",ref:e=>{this.containerRef=e,n(e)},children:this.renderSections()})})}}},417294:(e,t,n)=>{function i(e,t,n){return{privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}}n.d(t,{Z:()=>i})},424337:(e,t,n)=>{n.d(t,{W:()=>l,Z:()=>u});var i=n(698991),r=n(641316),o=n(620831),s=n(59960),a=n(710159),c=n(883119),d=n(785893);function l(e,t=""){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce(((n,i,r)=>{if(n.length>0&&e&&e.length){const o=t.toLowerCase().indexOf(e.toLowerCase());return n.concat((0,d.jsx)("em",{style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"},children:t.substring(o,o+e.length)},r),i)}return[i]}),[]):t}const u=function(e){var t,n,u,h,p,f;const b=(0,a.ZP)(),{disabled:m,item:y,isSection:g,isSelectMode:v,isWithinSectionPicker:I,saveState:_,searchQuery:x,selected:w}=e,S=g?null:y,j=g?y:null,k=j&&j.title||S&&S.name||"";let E="",O=!1,P="",Z=0;S&&({image_cover_url:E,is_collaborative:O,privacy:P,section_count:Z=0}=S);const B=l(x,k),A=P===o.Z.BoardPrivacy.SECRET,D=!m&&(w||!!_),C=!I&&"number"==typeof Z&&Z>0,R="number"==typeof Z&&Z>0?"boardWithSection":"boardWithoutSection",z=v?b._("Select","Board select button label","Board select button label"):b._("Save","Pin save button label","Pin save button label");return(0,d.jsxs)(c.xu,{alignItems:"center",color:D?"lightGray":"white",display:"flex",height:64,marginStart:2,marginEnd:2,marginTop:1,padding:2,rounding:3,"data-test-id":R,children:[S&&(0,d.jsx)(c.xu,{height:48,width:48,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none",children:E?(0,d.jsx)(c.Ee,{src:E,alt:k,fit:"cover",naturalWidth:1,naturalHeight:1}):(0,d.jsx)("span",{})}),j&&!(null===(t=j.preview_pins)||void 0===t||!t.length)&&(0,d.jsx)(s.Z,{image_url:null!==(n=j.preview_pins[0].image_square_url)&&void 0!==n?n:"",naturalHeight:null!==(u=null===(h=j.preview_pins[0].image_square_size_pixels)||void 0===h?void 0:h.height)&&void 0!==u?u:1,naturalWidth:null!==(p=null===(f=j.preview_pins[0].image_square_size_pixels)||void 0===f?void 0:f.width)&&void 0!==p?p:1}),(0,d.jsxs)(c.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,d.jsx)(c.xv,{color:m?"subtle":"default",size:"lg",lineClamp:1,weight:"bold",children:B}),(C||!D)&&(0,d.jsxs)(c.kC,{alignItems:"center",justifyContent:"start",children:[A&&(0,d.jsx)(i.Z,{type:"secret"}),O&&(0,d.jsx)(r.Z,{board:S,showCollaborativeIcon:O,useLegoLayout:!0}),C&&(0,d.jsx)(i.Z,{type:"sections"})]}),!C&&D&&!_&&(0,d.jsx)(c.xu,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:(0,d.jsx)(c.xv,{color:"inverse",overflow:"normal",size:"lg",weight:"bold",children:z})}),!C&&D&&"loading"===_&&(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,d.jsx)(c.$j,{accessibilityLabel:b._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0})})]})]})}},698991:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(710159),r=n(883119),o=n(785893);const s=function({type:e}){const t=(0,i.ZP)(),n={group:{accessibilityLabel:t._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:t._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:t._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:t._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:t._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return(0,o.jsx)(r.xu,{marginStart:1,children:(0,o.jsx)(r.xu,{marginStart:2,children:"sections"===e||"sectionsInline"===e?(0,o.jsx)(r.JO,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:"12",color:"darkGray"}):(0,o.jsx)(r.JO,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:16,color:"darkGray"})})})}},151941:(e,t,n)=>{n.d(t,{Z:()=>b,S:()=>f});var i=n(662242),r=n(569444),o=n(560505),s=n(222421),a=n(724207),c=n(956528),d=n(816458),l=n(58612);const u=e=>t=>{l.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._("Please wait until the previous board action finishes."," - "," -- ");default:return e.message}}(t,e))},h=e=>(0,r.Z)(e.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,e.sectionId||e.boardId);function p(e,t){const{source:n,target:r}=e;r.boardId!==n.boardId?(t((0,c.Tq)(n.boardId,"pin_count")),t((0,c.Tq)(r.boardId,"pin_count"))):n.sectionId&&r.sectionId||t((0,c.Tq)(r.boardId,"pin_count")),n.sectionId&&t((0,i.Z)(n.sectionId)),r.sectionId&&t((0,i.Z)(r.sectionId))}function f(e){return t=>{const{selectedPinIds:n,source:i,target:r}=e;t((0,s.Z)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,itemIds:n,itemType:"pin"})),t((0,o.Z)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,itemIds:n,itemType:"pin"})),p(e,t)}}function b(e,t){return n=>function(e,t,n){const{inverseSelection:i,selectedPinIds:r,source:c,target:l}=e;if(c.boardId===l.boardId&&(c.sectionId||null)===(l.sectionId||null))return Promise.reject();if(i){const e={board_id:c.boardId,new_board_id:l.boardId,old_section_id:c.sectionId||void 0,new_section_id:l.sectionId||void 0,pin_ids:r};return a.ZP.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then((()=>Promise.all([t(h(c)),t(h(l))]))).catch(u(n))}{const e=(e,n)=>{t((0,s.Z)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,itemIds:r,itemType:"pin"})),t((0,o.Z)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,itemIds:r,itemType:"pin"}))};e(c,l);const i=()=>e(l,c);if(l.boardId===c.boardId){if(l.sectionId){const e={section_id:l.sectionId,pins:r};return a.ZP.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch((e=>{i(),u(n)(e)}))}{const e={section_id:c.sectionId,pins:r};return a.ZP.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch((e=>{i(),u(n)(e)}))}}{const e={board_id:l.boardId,section_id:l.sectionId||void 0,pin_ids:r};return a.ZP.create("BulkEditResource",e).callUpdate({showError:!1}).catch((e=>{i(),u(n)(e)}))}}}(e,n,t).then((()=>p(e,n)))}},149314:(e,t,n)=>{n.d(t,{Z:()=>u,h:()=>l});var i=n(569444),r=n(560505),o=n(151941),s=n(724207),a=n(956528),c=n(816458),d=n(689783);function l(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u,initialPinIds:h=[]},p,f){let b=0;"RECOMMENDATION"===n?b=1:"EDITED_RECOMMENDATION"===n&&(b=2);const m={board_id:e,initial_pins:u&&!u.all?u.pinIds:h,name:t,name_source:b,...f?{orbac_subject_id:f}:Object.freeze({})};return t=>s.ZP.create("BoardSectionResource",m).callCreate({showError:!1}).then((({resource_response:{data:n}})=>{t(l(e,n)),t((0,r.Z)({feedId:e,feedType:c.DV.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t((0,a.Tq)(e,"pin_count")),t((0,d.jB)("BoardSectionsRepinResource",{board_id:e}));const{all:s,pinIds:h}=u||{all:!1,pinIds:[]};return s?new Promise(((i,r)=>t((0,o.Z)({inverseSelection:!0,selectedPinIds:h,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}},p)).then((()=>i(n))).catch(r))):(h.length>0&&t((0,i.Z)(c.DV.BOARD_PINS,e)),n)}))}},662242:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(261484);function r(e,t){return n=>n((0,i.U2)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}},284355:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294);let r=null,o=!1,s=0;const a=()=>{r&&clearTimeout(r),o=!0,r=setTimeout((()=>{o=!1}),100)},c=()=>{const[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(null);(0,i.useEffect)((()=>(0===s&&window.addEventListener("scroll",a),s+=1,()=>{n.current&&clearTimeout(n.current),s-=1,s||window.removeEventListener("scroll",a)})),[]);const r=e=>{n.current&&clearTimeout(n.current),n.current=e&&o?setTimeout((()=>r(!0)),100):setTimeout((()=>{t(e)}),32)};return{isHovering:e,hoverHandlers:(0,i.useRef)({onMouseOver:()=>r(!0),onMouseLeave:()=>r(!1)}).current}}},672342:(e,t,n)=>{n.d(t,{H:()=>r,W:()=>o});var i=n(487889);const{Provider:r,useMaybeHook:o}=(0,i.Z)("PinCreateDeleteContext")},258872:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(883119),r=n(785893);const o={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function s(){return(0,r.jsx)(i.xu,{alignItems:"center",color:"red",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8,children:(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:o,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function a({disabled:e,name:t,onClick:n,size:o,submitting:a,text:c}){return(0,r.jsxs)(i.xu,{display:"flex",position:"relative",children:[a&&(0,r.jsx)(s,{}),(0,r.jsx)(i.zx,{color:"red",disabled:e||a,name:t,onClick:n,size:o,type:"submit",text:c})]})}},641914:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(40142),r=n(724207),o=n(474809),s=n(841229),a=n(261484),c=n(689783),d=n(782677);function l(){const e=(0,i.useDispatch)(),t=(0,i.useSelector)((e=>e.resources));return async function({boardCreateOptions:n,deprecatedSchemaForNormalization:i}){var l,u;const h=await r.ZP.create("BoardResource",n).callCreate(),p=null===(l=h.resource_response)||void 0===l?void 0:l.data,f=i?(0,d.Fv)(p,i):void 0;e((0,c.XM)("BoardResource",n,h,f)),e((0,o.fO)({event_type:20})),null!==(u=p.owner)&&void 0!==u&&u.id&&e((0,a.bi)("UserResource",{options:{user_id:p.owner.id,field_set_key:"save_behavior"}}));const b=t.BoardsResource||{},m=t.BoardsFeedResource||{};return Object.keys(b).forEach((t=>{var n;(0,s.k)(t).username===(null===(n=p.owner)||void 0===n?void 0:n.username)&&e((0,c.jB)("BoardsResource",t))})),Object.keys(m).forEach((t=>{var n;(0,s.k)(t).username===(null===(n=p.owner)||void 0===n?void 0:n.username)&&e((0,c.jB)("BoardsFeedResource",t))})),p}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/12555-f594b8dfe72724c6.mjs.map